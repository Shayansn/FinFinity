<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Spending</title>
    <link rel="stylesheet" href="styleSpendings.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <style>
        .custom-body {
            background: linear-gradient(to right, rgba(6, 6, 225, 0.457) 50%, rgb(154, 159, 178) 80%);
        }

        .navigation-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: white;
        }

        .logo {
            width: 40px;
            height: auto;
        }
    </style>
</head>
<body class="custom-body">
    <nav class="navigation-bar px-3">
        <img src="logo.png" alt="Logo" class="logo">
    </nav>

    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="main col col-lg-5 h-40">
            <p class="text-center fs-1">Spendings</p>
            <form id="spending-form" method="post" action="http://localhost:4000/submit-spending">
                <div class="form-group">
                    <label for="amount" class="fs-2">Amount</label>
                    <input type="number" class="form-control p-3" id="amount" name="amount" placeholder="Enter Spending ($)" required min="0.01" step="0.01">
                </div>
                <div class="form-group">
                    <label for="category" class="fs-2">Category</label>
                    <input type="text" class="form-control p-3" id="category" name="category" placeholder="Enter Category (Bills, Other, Groceries, Gas, Entertainment)" required>
                </div>
                <input type="hidden" id="spending-date" name="spendingDate">
                <div class="form-group button-group">
                    <button type="submit" class="btn btn-primary p-3">Submit</button>
                    <a href="updateSpendings/updateExpenses.html" class="btn btn-secondary p-3">Update Spendings</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('spending-form').addEventListener('submit', function(event) {
            const amountInput = document.getElementById('amount');
            const amount = parseFloat(amountInput.value);

            if (amount <= 0 || isNaN(amount)) {
                event.preventDefault();
                alert('Please enter a valid amount greater than $0.');
                amountInput.value = '';
                amountInput.focus();
            } else {
                const currentDate = new Date().toISOString().split('T')[0];
                document.getElementById('spending-date').value = currentDate;
            }
        });

        document.getElementById('category').addEventListener('blur', function(event) {
            const input = event.target.value.toLowerCase().trim();
            const allowedCategories = ['bills', 'other', 'groceries', 'gas', 'entertainment'];
            if (!allowedCategories.includes(input)) {
                event.target.value = '';
                event.target.focus();
            }
        });
    </script>
</body>
</html>
